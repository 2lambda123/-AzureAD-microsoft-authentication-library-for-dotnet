
# PR builds should be triggered on every branch except master (so we don't trigger again after a merge)
trigger:
  branches:
    include:
    - '*'
    exclude:
    - master

pool:
  name: Hosted VS2017
  demands:
  - msbuild
  - visualstudio

variables:
  BuildPlatform: 'any cpu'
  BuildConfiguration: 'debug'

steps:
# Bootstrap the build
- template: template-bootstrap-build.yaml

# Nuget Restore and Build LibsAndSamples.sln
- template: template-restore-build-libsandsamples.yaml
  parameters:
    BuildPlatform: '$(BuildPlatform)'
    BuildConfiguration: '$(BuildConfiguration)'

# Run Unit Tests
- template: template-run-unit-tests.yaml
  parameters:
    BuildConfiguration: '$(BuildConfiguration)'

# Run Integration Tests
- template: template-run-integration-tests.yaml
  parameters:
    BuildConfiguration: '$(BuildConfiguration)'
