# template-restore-build-libsandsamples.yaml
# Performs Nuget Restore and Build of LibsAndSamples.sln based on BuildPlatform and BuildConfiguration

parameters:
  BuildPlatform: 'any cpu'
  BuildConfiguration: 'debug'
  MsalClientSemVer: '4.0.0-devopsbuild'

steps:
- task: VSBuild@1
  displayName: 'NuGet restore LibsAndSamples.sln'
  inputs:
    solution: LibsAndSamples.sln
    vsVersion: '15.0'
    msbuildArgs: '/t:restore'
    platform: '$(BuildPlatform)'
    configuration: '$(BuildConfiguration)'

- task: VSBuild@1
  displayName: 'Build solution LibsAndSamples.sln'
  inputs:
    solution: LibsAndSamples.sln
    vsVersion: '15.0'
    msbuildArgs: '/p:RunCodeAnalysis=false /p:ReferencedBinsPathRoot=$(Build.BinariesDirectory)\FxCopRefAssemblies /p:MsalClientSemVer=$(MsalClientSemVer) /p:SourceLinkCreate=true'
    platform: '$(BuildPlatform)'
    configuration: '$(BuildConfiguration)'
    clean: true
