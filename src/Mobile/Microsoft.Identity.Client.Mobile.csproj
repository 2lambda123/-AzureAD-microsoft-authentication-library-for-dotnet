<Project Sdk="MSBuild.Sdk.Extras">

  <PropertyGroup Label="Target Frameworks"> 
    
    <TargetFrameworkNetStandard>netstandard1.3</TargetFrameworkNetStandard> 
    <TargetFrameworkIos>Xamarin.iOS10</TargetFrameworkIos>
    <!-- <TargetFrameworkMac>xamarinmac20</TargetFrameworkMac> -->
    <!--<TargetFrameworkAndroid9>MonoAndroid9.0</TargetFrameworkAndroid9>-->
    <TargetFrameworkAndroid10>MonoAndroid10.0</TargetFrameworkAndroid10>
    <TargetFrameworkUap>uap10.0</TargetFrameworkUap>

    <TargetFrameworks>$(TargetFrameworkNetStandard);$(TargetFrameworkIos);$(TargetFrameworkAndroid9);$(TargetFrameworkAndroid10)</TargetFrameworks>
    <TargetFrameworks Condition="$([MSBuild]::IsOsPlatform('Windows'))">$(TargetFrameworks);$(TargetFrameworkUap);</TargetFrameworks>

  </PropertyGroup>

  <PropertyGroup>    
    <DefineConstants>$(DefineConstants);MSAL_XAMARIN;</DefineConstants>
    <NoWarn>$(NoWarn);CS8002;NU5131;</NoWarn>
  </PropertyGroup>

  <Import Project="../flags.props" />

  <ItemGroup>
    <Compile Include="$(MSBuildThisFileDirectory)\..\Desktop\**\*.cs" 
             Exclude="$(MSBuildThisFileDirectory)\..\Desktop\obj\**\*;
             $(MSBuildThisFileDirectory)\..\Desktop\Properties\**\*" LinkBase="Desktop" />
  </ItemGroup>

  <ItemGroup Condition=" '$(TargetFramework)' == '$(TargetFrameworkNetDesktop45)' Or '$(TargetFramework)' == '$(TargetFrameworkNetDesktop461)' ">
   
  </ItemGroup>

  <ItemGroup Condition="'$(TargetFramework)' == '$(TargetFrameworkNetStandard)'">
    <PackageReference Include="System.Security.SecureString" Version="4.3.0" />
    <PackageReference Include="System.Xml.XmlDocument" Version="4.3.0" />

  </ItemGroup>
  
  <ItemGroup Condition="'$(TargetFramework)' == '$(TargetFrameworkUap)' ">
    <Compile Include="$(PathToMsalSources)\Platforms\uap\**\*.cs" />
    <Compile Include="$(PathToMsalSources)\Platforms\Features\WamBroker\**\*.cs" />

    <PackageReference Include="Microsoft.CSharp" Version="4.5.0" />
    <PackageReference Include="System.Runtime.Serialization.Primitives" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Formatters" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Json" Version="4.3.0" />
    <PackageReference Include="System.Xml.XDocument" Version="4.3.0" />
    <PackageReference Include="System.Net.NameResolution" Version="4.3.0" />
    <PackageReference Include="System.Security.SecureString" Version="4.3.0" />

    <!-- 4.1.3 has CVE-2018-0786 -->
    <!--<PackageReference Include="System.ServiceModel.Http" Version="4.5.3" />-->
    <!--<PackageReference Include="System.ServiceModel.NetTcp" Version="4.5.3" />-->
    <!--<PackageReference Include="System.ServiceModel.Security" Version="4.5.3" />-->

  </ItemGroup>
  
  <ItemGroup Condition=" '$(TargetFramework)' == '$(TargetFrameworkIos)' ">
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.IdentityModel" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
    <PackageReference Include="Microsoft.CSharp" Version="4.5.0" />
    <PackageReference Include="System.ComponentModel.TypeConverter" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Primitives" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Formatters" Version="4.3.0" />
    <PackageReference Include="System.Xml.XmlDocument" Version="4.3.0" />
    <PackageReference Include="System.Security.SecureString" Version="4.3.0" />
  </ItemGroup>
  <ItemGroup Condition=" '$(TargetFramework)' == '$(TargetFrameworkMac)' ">
    <Reference Include="System" />
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.IdentityModel" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="Xamarin.Mac" />
  </ItemGroup>
  <ItemGroup Condition=" $(TargetFramework.StartsWith('MonoAndroid')) ">
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.IdentityModel" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Xml" />
    <Reference Include="Microsoft.CSharp" />
    <PackageReference Include="System.Security.SecureString" Version="4.3.0" />
  </ItemGroup>
  <ItemGroup Condition=" '$(TargetFramework)' == '$(TargetFrameworkAndroid9)' ">
    <PackageReference Include="Xamarin.Android.Support.CustomTabs" Version="28.0.0.3" />
  </ItemGroup>
  <ItemGroup Condition=" '$(TargetFramework)' == '$(TargetFrameworkAndroid10)' ">
    <PackageReference Include="Xamarin.AndroidX.Browser" Version="1.0.0" />
  </ItemGroup>
  
  
  <ItemGroup>
    <ProjectReference Include="..\Microsoft.Identity.Client.Shared\Microsoft.Identity.Client.Shared.csproj" />
  </ItemGroup>


  <ItemGroup>
    <Folder Include="Platforms\" />
  </ItemGroup>
  
  
</Project>

