<Project Sdk="MSBuild.Sdk.Extras">

  <PropertyGroup Label="Target Frameworks">

    <TargetFrameworkNetDesktop461>net461</TargetFrameworkNetDesktop461>
    <TargetFrameworkNetDesktop45>net45</TargetFrameworkNetDesktop45>
    <TargetFrameworkNetStandard>netstandard1.3</TargetFrameworkNetStandard>
    <TargetFrameworkNetCore>netcoreapp3.1</TargetFrameworkNetCore>

    <TargetFrameworkUap>uap10.0</TargetFrameworkUap>

    <TargetFrameworkIos>Xamarin.iOS10</TargetFrameworkIos>    
    <TargetFrameworkMac>xamarinmac20</TargetFrameworkMac>
    <TargetFrameworkAndroid9>MonoAndroid9.0</TargetFrameworkAndroid9>
    <TargetFrameworkAndroid10>MonoAndroid10.0</TargetFrameworkAndroid10>

    <TargetFrameworks>
      $(TargetFrameworkNetStandard);$(TargetFrameworkNetCore);$(TargetFrameworkIos);$(TargetFrameworkAndroid9);$(TargetFrameworkAndroid10)
    </TargetFrameworks>
    <TargetFrameworks Condition="$([MSBuild]::IsOsPlatform('Windows'))">
      $(TargetFrameworks);$(TargetFrameworkUap);$(TargetFrameworkNetCore)
    </TargetFrameworks>

    <NoWarn>$(NoWarn);CS8002;NU5131;</NoWarn>
    <PathToMsalSources></PathToMsalSources>
  </PropertyGroup>

  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugType>Full</DebugType>
  </PropertyGroup>

   <PropertyGroup Label="NuGet and AssemblyInfo metadata">
    <XamarinAndroidSupportSkipVerifyVersions>true</XamarinAndroidSupportSkipVerifyVersions>   
    <!-- Copyright needs to be in the form of © not (c) to be compliant -->
    <Title>Microsoft Authentication Library for .NET</Title>
    <Description>
      This package contains the binaries of the Microsoft Authentication Library for .NET (MSAL.NET).
      MSAL.NET makes it easy to obtain tokens from the Microsoft identity platform for developers (formally Azure AD v2.0) signing-in users with work &amp; school accounts, Microsoft personal accounts and social identities Azure AD B2C. These tokens again access to Microsoft Cloud API and any other API secured by the Microsoft identity platform. This version supports adding authentication functionality to your .NET based client on Windows desktop (.NET 4.5+), UWP, .NET Core, Xamarin iOS and Xamarin Android.
    </Description>
    <PackageTags>Microsoft Authentication Library MSA MSAL B2C Azure Active Directory AAD Identity Authentication .NET Windows Store Xamarin iOS Android</PackageTags>
    <Product>Microsoft Authentication Library</Product>
    <EmbedUntrackedSources>true</EmbedUntrackedSources>
    <DisableExtraReferences>true</DisableExtraReferences>
    <!-- for https://github.com/xamarin/xamarin-macios/issues/7249 -->
  </PropertyGroup>

  <Import Project="../../flags.props" />
  <Import Project="../../package.props" />


  <ItemGroup>
    <Compile Include="..\Microsoft.Identity.Client.PublicClient.NoXamarin\**\*.cs"
             Exclude="..\Microsoft.Identity.Client.PublicClient.NoXamarin\obj\**\*" LinkBase="Desktop" />
  </ItemGroup>

  <Import Project="../Microsoft.Identity.Client.PublicClient.NoXamarin/pca.noxamarin.references.props"/>

  <ItemGroup Condition="'$(TargetFramework)' == '$(TargetFrameworkUap)' ">
    <Compile Include="$(PathToMsalSources)\Platforms\uap\**\*.cs" />
    <Compile Include="$(PathToMsalSources)\Platforms\Features\WamBroker\**\*.cs" />

    <PackageReference Include="Microsoft.CSharp" Version="4.5.0" />
    <PackageReference Include="System.Runtime.Serialization.Primitives" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Formatters" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Json" Version="4.3.0" />
    <PackageReference Include="System.Xml.XDocument" Version="4.3.0" />
    <PackageReference Include="System.Net.NameResolution" Version="4.3.0" />
    <PackageReference Include="System.Security.SecureString" Version="4.3.0" />

    <!-- 4.1.3 has CVE-2018-0786 -->
    <!--<PackageReference Include="System.ServiceModel.Http" Version="4.5.3" />-->
    <!--<PackageReference Include="System.ServiceModel.NetTcp" Version="4.5.3" />-->
    <!--<PackageReference Include="System.ServiceModel.Security" Version="4.5.3" />-->

  </ItemGroup>
  <ItemGroup Condition=" '$(TargetFramework)' == '$(TargetFrameworkIos)' ">
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.IdentityModel" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
    <PackageReference Include="Microsoft.CSharp" Version="4.5.0" />
    <PackageReference Include="System.ComponentModel.TypeConverter" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Primitives" Version="4.3.0" />
    <PackageReference Include="System.Runtime.Serialization.Formatters" Version="4.3.0" />
    <PackageReference Include="System.Xml.XmlDocument" Version="4.3.0" />
    <PackageReference Include="System.Security.SecureString" Version="4.3.0" />
  </ItemGroup>
  <ItemGroup Condition=" '$(TargetFramework)' == '$(TargetFrameworkMac)' ">
    <Reference Include="System" />
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.IdentityModel" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="Xamarin.Mac" />
  </ItemGroup>
  <ItemGroup Condition=" $(TargetFramework.StartsWith('MonoAndroid')) ">
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.IdentityModel" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Xml" />
    <Reference Include="Microsoft.CSharp" />
    <PackageReference Include="System.Security.SecureString" Version="4.3.0" />
  </ItemGroup>
  <ItemGroup Condition=" '$(TargetFramework)' == '$(TargetFrameworkAndroid9)' ">
    <PackageReference Include="Xamarin.Android.Support.CustomTabs" Version="28.0.0.3" />
  </ItemGroup>
  <ItemGroup Condition=" '$(TargetFramework)' == '$(TargetFrameworkAndroid10)' ">
    <PackageReference Include="Xamarin.AndroidX.Browser" Version="1.0.0" />
  </ItemGroup>
  
  
  <ItemGroup>
    <ProjectReference Include="..\Microsoft.Identity.Client.Shared\Microsoft.Identity.Client.Shared.csproj" />
  </ItemGroup>

</Project>

